# libs/git
# 
# Functions to control the project source code.
#
# Author: Jiajun Liu <jiajun@unitedstack.com>
#

# git_clone remote dest-dir branch
git_clone() {
    local remote=$1
    local destdir=$2
    local branch=$3

    if [[ ! -d ${destdir} ]]; then
        git clone ${remote} ${destdir}
    fi
    pushd ${destdir}
    git reset --hard
    git remote set-url origin ${remote}
    popd
}

# git_update_branch branch
git_update_branch() {
    local destdir=$2
    local branch=$1

    pushd ${destdir}
    git fetch origin
    git checkout -f origin/${branch}
    git branch -D ${branch} || true
    # a local branch might not exist
    git checkout -b ${branch}
    popd
}
